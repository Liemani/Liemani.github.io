[홈으로](/)
# 핸드폰을 MacBook 의 터미널로 사용하기(router 없이, 충전기 없이)
November 13, 2021

<br/>
## 환경

- MacBook Air (M1, 2020): macOS Monterey 12.0.1
- iPhone SE2: iOS 15.1

<br/>
## 목표

<br/>
바깥에서 가방에 맥북이 있는 채로 가볍게 아이패드나 아이폰에서 ssh 로 맥북에 접속할 수 있다면 재밌지 않을까? 버스에서 핸드폰으로 가방의 맥북에 접속하여 가볍게 작업하는 것이 가능하다면 재밌을 것 같다. 가벼운 c 프로그램을 작성해볼 수도 있을 것이고, python 을 가지고 노는 것도 가능할 것이다. 아니면 man page 를 뒤적여 볼 수도 있을 것이다. 나는 오늘 '핸드폰으로 가방에 있는 맥북에 ssh 로 접속하기' 를 목표로 시도하여 성공한 방법을 소개하겠다.

<br/>
## 맥북과 핸드폰을 ad hoc network 로 연결하기

<br/>
우선 router 없이 맥북과 핸드폰을 직접 연결하기 위해 검색하던 중, 맥북이 마치 router 같은 역할을 하여 Wi-Fi 를 통해 주변 기기와 local network 를 구성하는 방법을 발견했다. 이런 식의 network 를 ad hoc network 라고 하는 듯 하다. 공유기를 통하지 않고 직접 통신하는 local network 를 지칭하는 단어인 것 같다. 내가 시도한 방법은 다음과 같다.

1. 맥북의 시스템 환경설정
2. 네트워크
3. 왼쪽 탭에서 Wi-Fi 선택
4. 오른쪽 하단의 고급 버튼 클릭
5. 레거시 네트워크 및 옵션 보기 체크
6. 상단 바에서 Wi-Fi 아이콘 클릭
7. 네트워크 생성
8. Wi-Fi 로 생성된 네트워크를 선택

이 과정을 마치고 나면 맥북이 router 같은 역할을 하게 되어 다른 기기를 사용하여 맥북의 local network 에 직접 연결할 수 있게 된다. 이제 핸드폰의 Wi-Fi 설정에서 맥의 network 가 보일 것이다(시간이 좀 걸릴 수 있다). Wi-Fi 를 잡으면 두 기기간의 local network 가 형성된 것이다. 이제 핸드폰에서 ssh 연결을 해주는 앱을 사용하여 맥북에 접속해주면 된다.[주석:1]

<br/>
## 전원 연결 없는 상태에서 클램쉘 모드 사용하기

<br/>
전원 케이블이 연결되 있는 상태에서 클램쉘 모드를 사용하는 방법은 어렵지 않게 찾아볼 수 있다. 하지만 전원 케이블이 연결되어 있지 않은 상태에서 apple 이 gui 상 제공하는 시스템 환경설정 세팅만으로는 맥북의 화면을 덮었을 때 sleep 하는 것을 막을 수 없다. 그렇기 때문에 이 때 sleep 하지 않게 하는 방법을 찾아야만 network 연결이 끊어지지 않고 ssh 를 유지시키는 목표를 달성할 수 있다. 맥북의 화면을 덮었을 때 sleep 하지 않도록 설정하는 방법은 구글링을 통해 어렵지 않게 알아낼 수 있었다. 나는 pmset 이라는 terminal 명령어를 사용하였다.
	sudo pmset -b disablesleep 1
이명령어를 실행하면 배터리를 사용하는 상태에서 화면을 덮어도 맥북이 sleep 하지 않기 때문에 네트워크의 연결이 유지 된다[주석:2]. 단, 화면을 덮어도 화면이 알아서 꺼지지 않게 되기 때문에 시스템 환경 설정에서 '배터리 사용 시 디스플레이 끄기' 시간을 최소로 설정해 주었다.

<br/>
## 단점

1. ad hoc 네트워크로 연결 중인 기기는 Wi-Fi 로 무선 인터넷을 이용할 수 없다.
2. 맥북의 Wi-Fi 를 사용하므로, Wi-Fi 로 인터넷을 사용하는 환경과 ad hoc 네트워크를 사용하는 환경 간의 전환을 손수 설정해 주어야 하는 번거로움이 있다.
3. 맥북이 sleep 하지 못하므로 배터리가 조금씩 닳을 것이다(배터리를 많이 잡아먹는 화면은 꺼져 있기 때문에 큰 문제는 안될 것이다).
4. 내가 사용한 Termius 앱이 한글 입력을 제대로 수행하지 못하는 등, 한글 호환성 문제가 있을 수 있다.

<br/>
## 결론

<br/>
이런 단점들에도 불구하고 이 방법은 핸드폰만으로 컴퓨터 자원을 활용할 수 있다는 큰 장점을 가지고 있다. 비록 핸드폰에서도 iSH 이나 a-Shell 등 cli 를 제공하는 앱이 있었지만, 기능 부족과 통일되지 않은 환경으로 인해 아쉬움이 많았다. 하지만 위의 방법은 핸드폰에서 맥북에 직접 접속하여 작업을 하므로, 컴퓨터를 사용하든 핸드폰을 사용하든 동일한 환경에서 동일한 데이터를 다룰 수 있어서 좋다. 또한 어떠한 물리적 상황에서도 핸드폰 만으로 쉽고 빠르게 컴퓨터로 하던 작업을 이어 할 수 있다.

<br/>
## 후기

<br/>
이 글의 초안을 ssh 로 맥북에 연결한 iPad 에서 작성해보았다. iPad 로 무선 키보드를 사용하는 것은 맥북에서와 달리 작업을 하기에 무척 불편했다. fn 키 작동방식의 차이, 한영 전환의 차이 등 어찌 해볼 수 없는 여러 불편한 점이 있었다. 게다가 Termius 앱이 한글을 제대로 입력하지 못하는 것인지 쌍자음이 모음과 합쳐지지 않는 치명적인 문제로 인해, 결국 apple 기본 앱인 Notes 에 작성 후 복붙으로 마무리했다.. 비록 3년 넘은 6 세대 iPad 이기는 하지만, vim 을 하나만 켰을 뿐인데도 딜레이가 꽤나 큰 것도 문제였다(대략 0.n 초). 내 아이패드에서 ssh 로 작업은 무리이고 간단히 man page 탐색 및 맥북 디스크에 데이터를 직접 기록하는 용도 정도로 사용할 만 할 것 같다.

<br/>
[1] 나는 Termius 라는 앱을 사용했다. 이 때 ssh 로 맥북에 접속하기 위해서는 맥북의 ip 주소가 필요한데, 맥북의 시스템 환경설정 -> 네트워크 -> 왼쪽 탭에서 Wi-Fi 선택을 하면 오른쪽 상태 설명 창에서 맥북의 IP 주소를 확인할 수 있다(맥북에서 만든 local network 를 적용하고 나서 IP 주소가 뜨기 까지 시간이 조금 걸릴 수 있다)<br/>
[2] 반대로 정상적으로 sleep 하도록 되돌리려면 위 명령에서 1 대신 0 을 넣어주면 된다.
